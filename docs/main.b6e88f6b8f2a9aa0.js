(self.webpackChunklmcatalog=self.webpackChunklmcatalog||[]).push([[179],{7220:(u,m,e)=>{"use strict";e.d(m,{z:()=>i});const i={parse:{dateInput:["l","LL","DDMMYY"]},display:{dateInput:"L",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},9827:(u,m,e)=>{"use strict";var i=e(5427),n=e(3668),j=e(1277),o=e(697);let d=(()=>{class s{constructor(t){this.translate=t;const r=t.getBrowserLang()||"es";t.addLangs(["es","en"]),t.use(r)}}return s.\u0275fac=function(t){return new(t||s)(n.Y36(j.sK))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&n._UZ(0,"router-outlet")},directives:[o.lC],encapsulation:2}),s})();var L=e(9555),F=e(3962);const h_apiUrl="https://us-central1-project.cloudfunctions.net";var v=e(6019),p=e(128);const I=[{path:"app",loadChildren:()=>e.e(326).then(e.bind(e,6326)).then(s=>s.PrivateModule),canActivate:[p.Kp]},{path:"public",loadChildren:()=>e.e(573).then(e.bind(e,9573)).then(s=>s.PublicModule),canActivate:[p.HC]},{path:"**",redirectTo:"/public/",pathMatch:"full"}];let Y=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[[o.Bz.forRoot(I)],o.Bz]}),s})();var y=e(4522),w=e(7623);const R={defaultLanguage:"es",loader:{provide:j.Zw,useFactory:function(s){return new w.w(s)},deps:[y.eN]},isolate:!1};var O=e(5349),U=e(1058),S=e(6731),T=e(6515),E=e(7220),b=e(2070),V=e(4499),g=e(2997),x=e(9433),A=e(7384),k=e(2835);var l=(()=>{return(s=l||(l={})).Admin="admin",s.Client="client",l;var s})();class C{isAdmin(){return this.role===l.Admin}isClient(){return this.role===l.Client}}var M=e(6271);let z=(()=>{class s{constructor(t,r){this.http=t,this.router=r,this.storage=sessionStorage,this.userSessionSource=new V.X(null)}get userSessionSync(){return this.userSessionSource.getValue()}get companyId(){return this.userSessionSource.getValue().companyId}get storeId(){return this.userSessionSource.getValue().storeId}isAdmin(){return this.userSessionSource.getValue().role===l.Admin}isAdminOrClient(){let t=this.userSessionSource.getValue().role;return t===l.Admin||t===l.Client}get userSessionRole(){return this.userSessionSync.role}getAccessToken(){return(0,g.of)(this.storage.getItem("token"))}getUserSession(){return this.http.get(`${h_apiUrl}/auth/session`).pipe((0,A.b)(t=>{if(!t)throw new Error("Sesi\xf3n expirada");this.userSessionSource.next((0,M.d8)(C,t))}),(0,k.K)(t=>(0,x._)(t)))}isAuthorized(){const t=this.storage.getItem("expKey");if(!this.storage.getItem("token")||!t)return(0,g.of)(!1);const c=b.unix(Number(t));if(!c.isValid())return(0,g.of)(!1);const D=b().isBefore(c);return(0,g.of)(D)}refreshShouldHappen(t){return!1}refreshToken(){return(0,g.of)(void 0)}clearStorage(){this.storage.clear(),this.userSessionSource.next(null)}requestResetPassword(t){return this.http.post(`${h_apiUrl}/auth/request-reset-password`,t)}resetPassword(t){return this.http.put(`${h_apiUrl}/auth/reset-password`,t)}logout(){this.clearStorage(),this.router.navigate(["/public/auth/login"])}login(t){return this.http.post(`${h_apiUrl}/auth/login`,t).pipe((0,A.b)(r=>{this.storage.setItem("token",r.accessToken),this.storage.setItem("expKey",r.expiresIn.toString())}),(0,A.b)(r=>{const c=r.user;if(!c)throw new Error("Sesi\xf3n expirada");this.userSessionSource.next((0,M.d8)(C,c))}))}}return s.\u0275fac=function(t){return new(t||s)(n.LFG(y.eN),n.LFG(o.F0))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac}),s})(),G=(()=>{class s{constructor(t,r){this.authService=t,this.router=r}intercept(t,r){return r.handle(t).pipe((0,k.K)(c=>(401===c.status&&!this.router.url.includes("auth")&&this.authService.logout(),(0,x._)(()=>c))))}}return s.\u0275fac=function(t){return new(t||s)(n.LFG(z),n.LFG(o.F0))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac}),s})(),B=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({providers:[z,{provide:p.tN,useValue:"/app"},{provide:p.s4,useValue:"/public/auth/login"},{provide:p.i_,useClass:z},{provide:y.TP,useClass:G,multi:!0}],imports:[[p.ny]]}),s})();(0,v.qS)(U.Z,"en"),(0,v.qS)(O.Z,"es-CO");let N=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.oAB({type:s,bootstrap:[d]}),s.\u0275inj=n.cJS({providers:[{provide:v.S$,useClass:v.Do},{provide:n.soG,useValue:"es-CO"},{provide:n.EJc,useValue:"$"},{provide:S._A,useClass:T.t7,deps:[S.Ad]},{provide:S.sG,useValue:E.z}],imports:[[i.b2,L.PW,Y,y.JF,B,j.aw.forRoot(R),F.Wr.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),s})();(0,n.G48)(),i.q6().bootstrapModule(N).catch(s=>console.error(s))},6700:(u,m,e)=>{var i={"./af":92,"./af.js":92,"./ar":8478,"./ar-dz":2230,"./ar-dz.js":2230,"./ar-kw":3297,"./ar-kw.js":3297,"./ar-ly":5365,"./ar-ly.js":5365,"./ar-ma":2822,"./ar-ma.js":2822,"./ar-sa":9751,"./ar-sa.js":9751,"./ar-tn":76,"./ar-tn.js":76,"./ar.js":8478,"./az":9496,"./az.js":9496,"./be":4350,"./be.js":4350,"./bg":4027,"./bg.js":4027,"./bm":2281,"./bm.js":2281,"./bn":9850,"./bn-bd":8598,"./bn-bd.js":8598,"./bn.js":9850,"./bo":4531,"./bo.js":4531,"./br":4660,"./br.js":4660,"./bs":2196,"./bs.js":2196,"./ca":7126,"./ca.js":7126,"./cs":2601,"./cs.js":2601,"./cv":154,"./cv.js":154,"./cy":5682,"./cy.js":5682,"./da":6774,"./da.js":6774,"./de":6840,"./de-at":5150,"./de-at.js":5150,"./de-ch":7801,"./de-ch.js":7801,"./de.js":6840,"./dv":1251,"./dv.js":1251,"./el":3086,"./el.js":3086,"./en-au":6991,"./en-au.js":6991,"./en-ca":8811,"./en-ca.js":8811,"./en-gb":7945,"./en-gb.js":7945,"./en-ie":3737,"./en-ie.js":3737,"./en-il":8528,"./en-il.js":8528,"./en-in":5156,"./en-in.js":5156,"./en-nz":8469,"./en-nz.js":8469,"./en-sg":9576,"./en-sg.js":9576,"./eo":7815,"./eo.js":7815,"./es":4446,"./es-do":651,"./es-do.js":651,"./es-mx":1114,"./es-mx.js":1114,"./es-us":2389,"./es-us.js":2389,"./es.js":4446,"./et":298,"./et.js":298,"./eu":5499,"./eu.js":5499,"./fa":6277,"./fa.js":6277,"./fi":6286,"./fi.js":6286,"./fil":9630,"./fil.js":9630,"./fo":1877,"./fo.js":1877,"./fr":3198,"./fr-ca":7110,"./fr-ca.js":7110,"./fr-ch":897,"./fr-ch.js":897,"./fr.js":3198,"./fy":3363,"./fy.js":3363,"./ga":9775,"./ga.js":9775,"./gd":8977,"./gd.js":8977,"./gl":6853,"./gl.js":6853,"./gom-deva":7323,"./gom-deva.js":7323,"./gom-latn":25,"./gom-latn.js":25,"./gu":7582,"./gu.js":7582,"./he":602,"./he.js":602,"./hi":3452,"./hi.js":3452,"./hr":6783,"./hr.js":6783,"./hu":9280,"./hu.js":9280,"./hy-am":5185,"./hy-am.js":5185,"./id":9060,"./id.js":9060,"./is":9085,"./is.js":9085,"./it":5282,"./it-ch":376,"./it-ch.js":376,"./it.js":5282,"./ja":2360,"./ja.js":2360,"./jv":9153,"./jv.js":9153,"./ka":9679,"./ka.js":9679,"./kk":2765,"./kk.js":2765,"./km":5470,"./km.js":5470,"./kn":4539,"./kn.js":4539,"./ko":7206,"./ko.js":7206,"./ku":3236,"./ku.js":3236,"./ky":6505,"./ky.js":6505,"./lb":8895,"./lb.js":8895,"./lo":1009,"./lo.js":1009,"./lt":6167,"./lt.js":6167,"./lv":4322,"./lv.js":4322,"./me":396,"./me.js":396,"./mi":9125,"./mi.js":9125,"./mk":6742,"./mk.js":6742,"./ml":9961,"./ml.js":9961,"./mn":9711,"./mn.js":9711,"./mr":8724,"./mr.js":8724,"./ms":604,"./ms-my":6246,"./ms-my.js":6246,"./ms.js":604,"./mt":2066,"./mt.js":2066,"./my":5836,"./my.js":5836,"./nb":3670,"./nb.js":3670,"./ne":9195,"./ne.js":9195,"./nl":4726,"./nl-be":8634,"./nl-be.js":8634,"./nl.js":4726,"./nn":9054,"./nn.js":9054,"./oc-lnc":1075,"./oc-lnc.js":1075,"./pa-in":3421,"./pa-in.js":3421,"./pl":6348,"./pl.js":6348,"./pt":7321,"./pt-br":9196,"./pt-br.js":9196,"./pt.js":7321,"./ro":4328,"./ro.js":4328,"./ru":5057,"./ru.js":5057,"./sd":2277,"./sd.js":2277,"./se":8077,"./se.js":8077,"./si":8225,"./si.js":8225,"./sk":3e3,"./sk.js":3e3,"./sl":7824,"./sl.js":7824,"./sq":3875,"./sq.js":3875,"./sr":9444,"./sr-cyrl":7177,"./sr-cyrl.js":7177,"./sr.js":9444,"./ss":6687,"./ss.js":6687,"./sv":9625,"./sv.js":9625,"./sw":2879,"./sw.js":2879,"./ta":1516,"./ta.js":1516,"./te":9568,"./te.js":9568,"./tet":6882,"./tet.js":6882,"./tg":3015,"./tg.js":3015,"./th":1363,"./th.js":1363,"./tk":5275,"./tk.js":5275,"./tl-ph":8739,"./tl-ph.js":8739,"./tlh":5024,"./tlh.js":5024,"./tr":1275,"./tr.js":1275,"./tzl":8726,"./tzl.js":8726,"./tzm":6739,"./tzm-latn":2499,"./tzm-latn.js":2499,"./tzm.js":6739,"./ug-cn":8251,"./ug-cn.js":8251,"./uk":5810,"./uk.js":5810,"./ur":2426,"./ur.js":2426,"./uz":3170,"./uz-latn":6431,"./uz-latn.js":6431,"./uz.js":3170,"./vi":1900,"./vi.js":1900,"./x-pseudo":9384,"./x-pseudo.js":9384,"./yo":5607,"./yo.js":5607,"./zh-cn":4318,"./zh-cn.js":4318,"./zh-hk":7235,"./zh-hk.js":7235,"./zh-mo":250,"./zh-mo.js":250,"./zh-tw":7985,"./zh-tw.js":7985};function n(o){var d=j(o);return e(d)}function j(o){if(!e.o(i,o)){var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}return i[o]}n.keys=function(){return Object.keys(i)},n.resolve=j,u.exports=n,n.id=6700}},u=>{u.O(0,[736],()=>u(u.s=9827)),u.O()}]);